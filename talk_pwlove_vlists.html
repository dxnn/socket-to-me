<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>PW&lt;3: Fast Functional Lists</title>
	
	<meta name="description" content="Fast Functional Lists">
	<meta name="author" content="dann toliver">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="core/deck.core.css">
  <!-- <link rel="stylesheet" href="../extensions/goto/deck.goto.css">
  <link rel="stylesheet" href="../extensions/menu/deck.menu.css">
  <link rel="stylesheet" href="../extensions/hash/deck.hash.css">
  <link rel="stylesheet" href="../extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" href="../extensions/status/deck.status.css">
  <link rel="stylesheet" href="../extensions/scale/deck.scale.css"> -->

	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<link rel="stylesheet" href="themes/style/swiss.css">
	
	<!-- Transition theme. More available in /themes/transition/ or create your own.
	<link rel="stylesheet" href="themes/transition/horizontal-slide.css"> -->
	
	<script src="modernizr.custom.js"></script>
	
	<style>
    .deck-container .slide li {
      font-size:1em;
      list-style-type: none;
      text-align: left;
    }
    .deck-container .slide h3 {
      font-size:1.5em;
      color: #333;
    }
    .deck-container .slide pre {
      color: #000;
      border: none;
    }
    
    .deck-container {
      padding: 0px;
    }
    .deck-container .slide {
/*      background: #1F9E57;*/
      padding: 0px 20px;
    }
    .deck-container .slide > p {
      color: white;
      font-size: 1.2em;
    }
    .deck-container .slide > pre {
      color: white;
      font-size: 1.2em;
    }
    .deck-container .slide h1 {
      font-size:2em;
      color: white;
    }
    .deck-container .slide h2 {
/*      color: #3cb93c;*/
      color: white;
      border: 0px;
    }
    
    .white {
      background-color: #fff;
    }
    .green {
      background-color: #1F9E57;
    }
    
    .blue {
      background-color: #69f;
    }
    .teal {
      background-color: #00A383;
    }
    .lightgreen {
      background-color: #82B22C;
    }
    .red {
      background-color: #E73A95;
    }
    .orange {
      background-color: #FF7800;
    }
	</style>
</head>

<body class="deck-container">


<!-- Begin slides -->
<section class="slide green" id="title-slide">
  <h1>
    <p>Papers We Love:</p>
    <p>Fast Functional Lists</p>
  </h1>
</section>

<section class="slide green" id="phil">
  <h1>
    <p>Phil Bagwell</p>
    <p>
      <img src="vlists/Phil_Bagwell.jpg">
      <img src="vlists/6240371526_19daef23a8_z.jpg">
    </p>
  </h1>
</section>

<section class="slide green" id="ll">
  <h1>
    <p>Linked Lists</p>
  </h1>
</section>

<section class="slide green" id="arrays">
  <h1>
    <p>Arrays</p>
  </h1>
</section>

<section class="slide green" id="alternatives">
  <h2>
    <p>How do we combine?</p>
  </h2>
</section>

<section class="slide green" id="alternatives1">
  <h2>
    <p>How do we combine?</p>
  </h2>
  <p>cdr-coding</p>
</section>

<section class="slide green" id="alternatives2">
  <h2>
    <p>How do we combine?</p>
  </h2>
  <p>cdr-coding</p>
  <p>unrolled linked lists</p>
</section>

<section class="slide green" id="alternatives3">
  <h2>
    <p>How do we combine?</p>
  </h2>
  <p>cdr-coding</p>
  <p>unrolled linked lists</p>
  <p>random access lists</p>
</section>

<section class="slide green" id="alternatives4">
  <h2>
    <p>How do we combine?</p>
  </h2>
  <p>cdr-coding</p>
  <p>unrolled linked lists</p>
  <p>random access lists</p>
  <p>recursive slowdown</p>
</section>

<section class="slide green" id="accp1">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
</section>

<section class="slide green" id="accp2">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space</p>
</section>

<section class="slide green" id="accp3">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
</section>

<section class="slide green" id="accp4">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case </p>
</section>

<section class="slide green" id="accp5">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case (usually worst)</p>
</section>

<section class="slide green" id="accp6">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case (usually worst)</p>
  <p>upper (O), lower (Omega), or tight (Theta) bounds</p>
</section>

<section class="slide green" id="accp7">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case (usually worst)</p>
  <p>upper (O), lower (Omega), or tight (Theta) bounds (usually upper)</p>
</section>

<section class="slide green" id="accp8">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case (usually worst)</p>
  <p>upper (O), lower (Omega), or tight (Theta) bounds (usually upper)</p>
  <p>uppercase or lowercase letters</p>
</section>

<section class="slide green" id="accp9">
  <h2>
    <p>Asymptotic Computational Complexity</p>
  </h2>
  <p>time and space (usually time)</p>
  <p>worst, average, or best case (usually worst)</p>
  <p>upper (O), lower (Omega), or tight (Theta) bounds (usually upper)</p>
  <p>uppercase or lowercase letters (usually upper)</p>
</section>

<section class="slide green" id="claims1">
  <h2>
    <p>Claims</p>
  </h2>
</section>

<section class="slide green" id="claims1a">
  <h2>
    <p>Claims</p>
  </h2>
  <p>- constant time direct access</p>
</section>

<section class="slide green" id="claims2">
  <h2>
    <p>Claims</p>
  </h2>
  <p>- constant time direct access</p>
  <p>- constant space overhead</p>
</section>

<section class="slide green" id="claims3">
  <h2>
    <p>Claims</p>
  </h2>
  <p>- constant time direct access</p>
  <p>- constant space overhead</p>
  <p>- constant time list operations</p>
</section>

<section class="slide green" id="claims4">
  <h2>
    <p>Claims</p>
  </h2>
  <p>- constant time direct access</p>
  <p>- constant space overhead</p>
  <p>- constant time list operations</p>
  <p>- persistent</p>
</section>

<section class="slide green" id="claims5">
  <h2>
    <p>Claims</p>
  </h2>
  <p>- constant time direct access</p>
  <p>- constant space overhead</p>
  <p>- constant time list operations</p>
  <p>- persistent</p>
  <p></p>
  <p>Great!!</p>
</section>

<section class="slide green" id="actual">
  <h2>
    <p>Actual Claims</p>
  </h2>
  <p>- typically constant time direct access</p>
  <p>- almost constant space overhead</p>
  <p>- amortized constant time list operations</p>
  <p>- persistent</p>
</section>

<section class="slide green" id="vlist">
  <h2>
    <p>Vlist Idea</p>
  </h2>
  <p>list via arrays: grow geometrically!</p>
</section>


<section class="slide green" id="f4f4f4f">
  <h2>
    <p>Awful VList</p>
  </h2>
<p> - copy everything</p>
</section>

<section class="slide green" id="f42f4f4f">
  <h2>
    <p>Awful VList</p>
  </h2>
<p> - copy everything</p>
<p> - horrible space usage</p>
<p> - not persistent</p>
</section>


<section class="slide green" id="2f23">
  <h2>
    <p>Bad Vlist</p>
  </h2>
<p> - use a pointer plus an offset -- restores persistence</p>
<p> - how do we: car, cdr, cons?</p>
</section>

<section class="slide green" id="2f233333">
  <h2>
    <p>Bad Vlist II</p>
  </h2>
<p> - use a pointer plus an offset -- restores persistence</p>
<p> - how do we: car, cdr, cons?</p>
<p> - car is pointer+offset</p>
<p> - cdr is pointer+offset-1, or pointer's block's base+offset</p>
<p> - cons is add item w/ new p+b, or new array if out of room (amortized)</p>
</section>


<section class="slide green" id="23f23f">
  <h2>
    <p>Better VList III</p>
  </h2>
<p> - reuse older data</p>
</section>

<section class="slide green" id="23f23f">
  <h2>
    <p>Better VList IV</p>
  </h2>
<p> - reuse older data</p>
<p> - prefix each array with a block of metadata</p>
</section>

<section class="slide green" id="23f23f">
  <h2>
    <p>Better VList V</p>
  </h2>
<p> - reuse older data</p>
<p> - prefix each array with a block of metadata</p>
<p> - each Block has a pointer + offset</p>
</section>

<section class="slide green" id="23f23f">
  <h2>
    <p>Better VList VI</p>
  </h2>
<p> - reuse older data</p>
<p> - prefix each array with a block of metadata</p>
<p> - each Block has a pointer + offset</p>
<p> - also need last used for persistent cons</p>
</section>

<section class="slide green" id="23f23f">
  <h2>
    <p>Better VList VII</p>
  </h2>
<p> - reuse older data</p>
<p> - prefix each array with a block of metadata</p>
<p> - each Block has a pointer + offset</p>
<p> - also need last used for persistent cons</p>
<p> - also need size</p>
</section>

<section class="slide green" id="23f323f">
  <h2>
    <p>Better VList VIII</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.06.19 PM.png"></p>
</section>

<section class="slide green" id="vli23f233st">
  <h2>
    <p>Problem: complicated reference</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.06.19 PM.png"></p>
</section>

<section class="slide green" id="23r3f">
  <h2>
    <p>VList Mark II</p>
  </h2>
<p> - use a single pointer</p>
</section>

<section class="slide green" id="23r33ff">
  <h2>
    <p>VList Mark II I</p>
  </h2>
<p> - use a single pointer</p>
<p> - what if we take advantage of alignment and masking?</p>
</section>

<section class="slide green" id="12e22e">
  <h2>
    <p>VList Mark II II</p>
  </h2>
<p> - sub-block base: last used, index, data type</p>
<p> <img src="vlists/Screen Shot 2015-01-07 at 6.06.32 PM.png"></p>
</section>

<section class="slide green" id="2323r">
  <h2>
    <p>VList Mark II III</p>
  </h2>
<p> - what about small lists? </p>
<p> - high overhead, can degenerate into awful linked list</p>
<p> - double data, little overhead -> regular linked list (ish)</p>
</section>


<section class="slide green" id="f32f3">
  <h2>
    <p>VList Mark II IV</p>
  </h2>
<p> - single pointer! </p>
<p> - persistent!</p>
<p> - good locality!</p>
<p> - good access!</p>
</section>

<section class="slide green" id="23423423">
  <h2>
    <p>Visp</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.06.43 PM.png"></p>
</section>

<section class="slide green" id="23423423">
  <h2>
    <p>Visp II</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.06.54 PM.png"></p>
</section>

<section class="slide green" id="gc">
  <h2>
    <p>Garbage collection</p>
  </h2>
<p> - O(n) for linked list</p>
<p> - O(lg n) for VList</p>
<p>   - but a lot of wasted space</p>
<p>   - and it frags memory</p>
<p>   - could alleviate by truncating and copying</p>
</section>

<section class="slide green" id="553r">
  <h2>
    <p>Idea: n-dimensional VList!</p>
  </h2>
</section>

<section class="slide green" id="123123">
  <h2>
    <p>n-dimensional VList</p>
  </h2>
<p> - fixed sized blocks are nice:</p>
<p>   --- worst-case constant wasted space</p>
<p>   --- easier to allocate</p>
<p> - but linear performance</p>
</section>

<section class="slide green" id="3234r">
  <h2>
    <p>n-dimensional VList II</p>
  </h2>
<p> - we could go multidimensional after some threshold</p>
<p> - increases random access by constant amount</p>
<p> - expected constant time ~random access, ~wasted space</p>
<p> - easier allocation</p>
<p> - hurts GC times a little, but still 2 OOM faster than LL</p>
</section>


<section class="slide green" id="rrrrrrrr">
  <h2>
    <p>n-dimensional VList III</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.07.02 PM.png"></p>
</section>

<section class="slide green" id="3r3r3r">
  <h2>
    <p>What became of the rest?</p>
  </h2>
  <p>- VHash</p>
  <p>- VArray</p>
  <p>- Thread Safety</p>
  <p>- Deques and catenation</p>
</section>

<section class="slide green" id="asdfffd">
  <h2>
    <p>VHash and VArray</p>
  </h2>
<!-- <p><img src="vlists/Screen Shot 2015-01-07 at 6.07.13 PM.png"></p> -->
<p><img src="vlists/Screen Shot 2015-01-07 at 6.07.22 PM.png"></p>
<p> - Ideal Hash Trees</p>
<p> - http://lampwww.epfl.ch/papers/idealhashtrees.pdf</p>
<p> - CS Cabal</p>
</section>

<section class="slide green" id="Thread_Safety">
  <h2>
    <p>Thread Safety</p>
  </h2>
<p> - Ctries</p>
<p> - http://lampwww.epfl.ch/~prokopec/ctries-snapshot.pdf</p>
</section>

<section class="slide green" id="asdf">
  <h2>
    <p>Deques and catenation</p>
  </h2>
<p><img src="vlists/Screen Shot 2015-01-07 at 6.07.31 PM.png"></p>
<p> - RRB Trees</p>
<p> - http://infoscience.epfl.ch/record/169879/files/RMTrees.pdf</p>
</section>


<section class="slide green" id="ccc">
  <h2>
    <p>Conclusion!</p>
  </h2>
<p> - Data structures are fun and puzzling!</p>
<p> - Much room remaining for improvement!</p>
<p> - You too can be a computer scientist!</p>
</section>



<section class="slide green" id="finally">
  <h1 style="font-size:1em;">
    <p>
      @dann
    </p>
    <p>
      dxnn @ github
    </p>
    <p>
      dann @ bentobox . net
    </p>
    <p style="display:none">
      datastructuresthegame . com
    </p>
  </h1>
</section>




<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script>window.jQuery || document.write('<script src="../jquery-1.7.2.min.js"><\/script>')</script>
-->
<script src="jquery-1.7.2.min.js"></script>

<!-- Deck Core and extensions -->
<script src="core/deck.core.js"></script>
<script src="extensions/hash/deck.hash.js"></script>

<!-- Initialize the deck -->
<script>
$(function() {
	$.deck('.slide');
});
</script>

</body>
</html>
